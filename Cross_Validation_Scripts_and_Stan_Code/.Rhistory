c_map <- sort(unique(compound[1:(i+end_stint[j]-K-1)]))
data_list[["compound_map"]] <- array(c_map, dim = length(c_map))
data_list[["C_used"]] <- length(c_map)
data_list[["Pit"]] <- pit[1:(i+end_stint[j]-K-1)]
data_list[["fuel_mass"]] <- fuel[1:(i+end_stint[j]-K-1)]
# Fit model on subset of data then get one step ahead prediction
stan.models[[i]] <- stan(file = model_string,
data = data_list,
chains = 3, iter = 30000,
control = list(adapt_delta = .99, max_treedepth = 12))
posteriors[[j]][[i]] <- extract(stan.models[[i]])
ypred_hat[i]  <- mean(posteriors[[j]][[i]]$y_pred)
ypred_l[i] <- quantile(posteriors[[j]][[i]]$y_pred, probs = .05)
ypred_u[i] <- quantile(posteriors[[j]][[i]]$y_pred, probs = .95)
}
# Plots
df <- tibble(laps = 1:end_stint[j],
y = y[1:end_stint[j]])
pred_df <- tibble(time = (end_stint[j] - K + 1):end_stint[j],
pred = ypred_hat,
pred_l = ypred_l,
pred_u = ypred_u)
plots[[j]] <- ggplot() +
geom_point(data = df,
aes(x = laps, y = y, color = "Observations")) +
geom_point(data = pred_df,
aes(x = time, y = pred, color = "Predictions")) +
geom_ribbon(data = pred_df, aes(x = time, ymin = pred_l, ymax = pred_u), fill = "black",color = "gray", alpha = .1) +
scale_color_manual(values = c("Observations" = "red",
"Predictions" = "blue")) +
labs(title = paste("Scatter Plot of Lap vs Lap Times with Predictions for Stint", j),
x = "Lap",
y = "Laptime in Seconds",
color = "Legend")
# Calculate Summary Statistic
MSPE <- mean((y[(end_stint[j]-K+1):end_stint[j]] - ypred_hat)^2)
RMSPE_vec[j] <- sqrt(MSPE)
}
return(list(RMSPE_vec,plots,posteriors))
}
stan_results_base <- stint_CV("full_race_1driver_and_fuel_base.stan", hamilton_data_base)
levels(Hamilton_2025_All_Races$Race)
# Setup
library(tidyverse)
library(Matrix)
library(rstan)
library(sgt)
library(scoringRules)
library(scoringutils)
source("CV_Functions.R")
options(mc.cores = parallel::detectCores())
allLaps <- read_csv("Hamilton_2025_All_Races.csv")
allLaps <- allLaps %>%
mutate(Stint = as.factor(Stint),
Compound = as.factor(Compound)) %>%
filter(!Race %in% c("Australian Grand Prix",
"British Grand Prix",
"Miami Grand Prix"))
unique(allLaps$Race)
length(stan_results_base[[3]])
View(allLaps)
allLaps <- allLaps %>%
mutate(Stint = as.factor(Stint),
Compound = as.factor(Compound),
LapTime = LapTimeSeconds) %>%
filter(!Race %in% c("Australian Grand Prix",
"British Grand Prix",
"Miami Grand Prix"))
# Setup
library(tidyverse)
library(Matrix)
library(rstan)
library(sgt)
library(scoringRules)
library(scoringutils)
source("CV_Functions.R")
options(mc.cores = parallel::detectCores())
allLaps <- read_csv("Hamilton_2025_All_Races.csv")
unique(allLaps$Race)
allLaps <- allLaps %>%
mutate(Stint = as.factor(Stint),
Compound = as.factor(Compound),
LapTime = LapTimeSeconds) %>%
filter(!Race %in% c("Australian Grand Prix",
"British Grand Prix",
"Miami Grand Prix"))
unique(allLaps$Race)
hamilton_df <- allLaps %>%
filter(Driver == "HAM",
is.na(PitOutTime) & is.na(PitInTime),
Race == "Austrian Grand Prix") %>%
mutate(Compound_Code = as.integer(factor(Compound,levels = c("HARD","MEDIUM","SOFT"))))
View(hamilton_df)
hamilton_df <- allLaps %>%
filter(Driver == "HAM",
is.na(PitOutTime) & is.na(PitInTime),
Race == "Austrian Grand Prix",
LapTime < 100) %>%
mutate(Compound_Code = as.integer(factor(Compound,levels = c("HARD","MEDIUM","SOFT"))))
hamilton_df <- allLaps %>%
filter(Driver == "HAM",
is.na(PitOutTime) & is.na(PitInTime),
Race == "Austrian Grand Prix",
LapTime < 100) %>%
mutate(Compound_Code = as.integer(factor(Compound,levels = c("HARD","MEDIUM","SOFT"))))
hamilton_laps <- hamilton_df$LapTime
hamilton_compound <- hamilton_df$Compound_Code
hamilton_pit <- rep(0,length(hamilton_compound))
for(i in 2:length(hamilton_df$Stint)) {
if(hamilton_df$Stint[i] != hamilton_df$Stint[i-1]) {
hamilton_pit[i-1] <- 1
}
}
fuel.kg <- seq(110,1,length.out = length(hamilton_laps))
hamilton_map <- sort(unique(hamilton_compound))
hamilton_used <- length(hamilton_map)
# Data for stan code
hamilton_data_Ext <- list(TT = length(hamilton_laps), y = hamilton_laps, C = 3, Compound = hamilton_compound, C_used = hamilton_used, compound_map = hamilton_map, Pit = hamilton_pit, z_reset0 = c(69.5,69,68.5), v_reset0 = 0, sdo0 = .3, fuel_mass = fuel.kg)
source("CV_Functions.R")
results_test <- skewt_CV("full_race_1driver_and_fuel_base_t.stan", hamilton_data_Ext)
results_test <- skewt_CV("full_race_1driver_and_fuel_base_t.stan", hamilton_data_Ext)
results_test <- skewt_CV("full_race_1driver_and_fuel_base_t.stan", hamilton_data_Ext)
hamilton_df <- allLaps %>%
filter(Driver == "HAM",
is.na(PitOutTime) & is.na(PitInTime),
Race == "Austrian Grand Prix",
LapTime < 100) %>%
mutate(Compound_Code = as.integer(factor(Compound,levels = c("HARD","MEDIUM","SOFT"))))
hamilton_laps <- hamilton_df$LapTime
hamilton_compound <- hamilton_df$Compound_Code
hamilton_pit <- rep(0,length(hamilton_compound))
for(i in 2:length(hamilton_df$Stint)) {
if(hamilton_df$Stint[i] != hamilton_df$Stint[i-1]) {
hamilton_pit[i-1] <- 1
}
}
fuel.kg <- seq(110,1,length.out = length(hamilton_laps))
hamilton_map <- sort(unique(hamilton_compound))
hamilton_used <- length(hamilton_map)
# Data for stan code
hamilton_data_base <- list(TT = length(hamilton_laps), y = hamilton_laps, C = 3, Compound = hamilton_compound, C_used = hamilton_used, compound_map = hamilton_map, Pit = hamilton_pit, z_reset0 = 69, v_reset0 = 0, sdo0 = .3, fuel_mass = fuel.kg)
results_test <- skewt_CV("full_race_1driver_and_fuel_base_t.stan", hamilton_data_base)
View(hamilton_df)
# Setup
library(tidyverse)
library(Matrix)
library(rstan)
library(sgt)
library(scoringRules)
library(scoringutils)
source("CV_Functions.R")
options(mc.cores = parallel::detectCores())
allLaps <- read_csv("Hamilton_2025_All_Races.csv")
allLaps <- allLaps %>%
mutate(Stint = as.factor(Stint),
Compound = as.factor(Compound),
LapTime = LapTimeSeconds) %>%
filter(!Race %in% c("Australian Grand Prix",
"British Grand Prix",
"Miami Grand Prix"))
hamilton_df <- allLaps %>%
filter(Driver == "HAM",
is.na(PitOutTime) & is.na(PitInTime),
Race == "Austrian Grand Prix",
LapTime < 100) %>%
mutate(Compound_Code = as.integer(factor(Compound,levels = c("HARD","MEDIUM","SOFT"))))
hamilton_laps <- hamilton_df$LapTime
hamilton_compound <- hamilton_df$Compound_Code
hamilton_pit <- rep(0,length(hamilton_compound))
for(i in 2:length(hamilton_df$Stint)) {
if(hamilton_df$Stint[i] != hamilton_df$Stint[i-1]) {
hamilton_pit[i-1] <- 1
}
}
fuel.kg <- seq(110,1,length.out = length(hamilton_laps))
hamilton_map <- sort(unique(hamilton_compound))
hamilton_used <- length(hamilton_map)
# Data for stan code
hamilton_data_base <- list(TT = length(hamilton_laps), y = hamilton_laps, C = 3, Compound = hamilton_compound, C_used = hamilton_used, compound_map = hamilton_map, Pit = hamilton_pit, z_reset0 = 69, v_reset0 = 0, sdo0 = .3, fuel_mass = fuel.kg)
arima_test <- arima_cv(hamilton_data_base$y,hamilton_data_base$Pit)
source("CV_Functions.R")
arima_test <- arima_cv(hamilton_data_base$y,hamilton_data_base$Pit)
sum(arima_test[[1]])
mean(arima_test[[3]])
?pmap_dfr
levels(allLaps$Race)
unqiue(allLaps$Race)
unique(allLaps$Race)
filter(allLaps, is.na(PitOutTime) & is.na(PitInTime), Race == "Chinese Grand Prix") %>%
ggplot(mapping = aes(x = LapNumber, y = LapTime, colour = Stint)) +
geom_point() +
geom_smooth() +
labs(title = "Tire Degration -- Lewis Hamilton (Ferrari)",
x = "Lap Number",
y = "Lap Time (Seconds)")
filter(allLaps, is.na(PitOutTime) & is.na(PitInTime), Race == "Chinese Grand Prix") %>%
ggplot(mapping = aes(x = LapNumber, y = LapTime, colour = Compound)) +
geom_point() +
labs(title = "Tire Degration -- Lewis Hamilton (Ferrari)",
x = "Lap Number",
y = "Lap Time (Seconds)")
hamilton_df <- allLaps %>%
filter(Driver == "HAM",
is.na(PitOutTime) & is.na(PitInTime),
Race == "Chinese Grand Prix",
LapTime < 100) %>%
mutate(Compound_Code = as.integer(factor(Compound,levels = c("HARD","MEDIUM","SOFT"))))
View(hamilton_df)
filter(allLaps, is.na(PitOutTime) & is.na(PitInTime), Race == "Japanese Grand Prix") %>%
ggplot(mapping = aes(x = LapNumber, y = LapTime, colour = Compound)) +
geom_point() +
labs(title = "Tire Degration -- Lewis Hamilton (Ferrari)",
x = "Lap Number",
y = "Lap Time (Seconds)")
filter(allLaps, is.na(PitOutTime) & is.na(PitInTime), Race == "Bahrain Grand Prix") %>%
ggplot(mapping = aes(x = LapNumber, y = LapTime, colour = Compound)) +
geom_point() +
labs(title = "Tire Degration -- Lewis Hamilton (Ferrari)",
x = "Lap Number",
y = "Lap Time (Seconds)")
hamilton_df <- allLaps %>%
filter(Driver == "HAM",
is.na(PitOutTime) & is.na(PitInTime),
Race == "Bahrain Grand Prix",
LapTime < 100) %>%
mutate(Compound_Code = as.integer(factor(Compound,levels = c("HARD","MEDIUM","SOFT"))))
View(hamilton_df)
View(hamilton_df)
hamilton_df <- allLaps %>%
filter(Driver == "HAM",
is.na(PitOutTime) & is.na(PitInTime),
Race == "Bahrain Grand Prix") %>%
mutate(Compound_Code = as.integer(factor(Compound,levels = c("HARD","MEDIUM","SOFT"))))
filter(allLaps, is.na(PitOutTime) & is.na(PitInTime), Race == "Bahrain Grand Prix", LapTime <105) %>%
ggplot(mapping = aes(x = LapNumber, y = LapTime, colour = Compound)) +
geom_point() +
labs(title = "Tire Degration -- Lewis Hamilton (Ferrari)",
x = "Lap Number",
y = "Lap Time (Seconds)")
allLaps <- allLaps %>%
mutate(Stint = as.factor(Stint),
Compound = as.factor(Compound),
LapTime = LapTimeSeconds) %>%
filter(!Race %in% c("Australian Grand Prix",
"British Grand Prix",
"Miami Grand Prix")) %>%
filter(!str_detect(TrackStatus, "4|5|6|7"))
hamilton_df <- allLaps %>%
filter(Driver == "HAM",
is.na(PitOutTime) & is.na(PitInTime),
Race == "Austrian Grand Prix") %>%
mutate(Compound_Code = as.integer(factor(Compound,levels = c("HARD","MEDIUM","SOFT"))))
View(hamilton_df)
filter(allLaps, is.na(PitOutTime) & is.na(PitInTime), Race == "Bahrain Grand Prix") %>%
ggplot(mapping = aes(x = LapNumber, y = LapTime, colour = Compound)) +
geom_point() +
labs(title = "Tire Degration -- Lewis Hamilton (Ferrari)",
x = "Lap Number",
y = "Lap Time (Seconds)")
# Setup
library(tidyverse)
library(Matrix)
library(rstan)
library(sgt)
library(scoringRules)
library(scoringutils)
source("CV_Functions.R")
options(mc.cores = parallel::detectCores())
allLaps <- read_csv("Hamilton_2025_All_Races.csv")
allLaps <- allLaps %>%
mutate(Stint = as.factor(Stint),
Compound = as.factor(Compound),
LapTime = LapTimeSeconds) %>%
filter(!Race %in% c("Australian Grand Prix",
"British Grand Prix",
"Miami Grand Prix")) %>%
filter(!str_detect(TrackStatus, "4|5|6|7")) # Drop Laps with safety car, virtual safety car, red flag, or safety car ending
race_params <- tibble(
Race = c("Chinese Grand Prix", "Japanese Grand Prix", "Bahrain Grand Prix"),
z_reset = c(96.0, 92.0, 96.5)
)
all_results <- pmap_dfr(race_params, function(Race, z_reset){
data_list <- load_race_data(Race)
data_list$z_reset0 <- z_reset
main_CV("full_race_1driver_and_fuel_base_t.stan", data_list, racename = Race)
})
race_params <- tibble(
Race = c("Chinese Grand Prix", "Japanese Grand Prix", "Bahrain Grand Prix"),
z_reset = c(96.0, 92.0, 96.5)
)
browser()
all_results <- pmap_dfr(race_params, function(Race, z_reset){
data_list <- load_race_data(Race)
data_list$z_reset0 <- z_reset
main_CV("full_race_1driver_and_fuel_base_t.stan", data_list, racename = Race)
})
race_params <- tibble(
Race = c("Chinese Grand Prix", "Japanese Grand Prix", "Bahrain Grand Prix"),
z_reset = c(96.0, 92.0, 96.5)
)
browser()
all_results <- pmap_dfr(race_params, function(Race, z_reset){
data_list <- load_race_data(Race)
data_list$z_reset0 <- z_reset
main_CV("full_race_1driver_and_fuel_base_t.stan", data_list, racename = Race)
})
source("CV_Functions.R")
race_params <- tibble(
Race = c("Chinese Grand Prix", "Japanese Grand Prix", "Bahrain Grand Prix"),
z_reset = c(96.0, 92.0, 96.5)
)
all_results <- pmap_dfr(race_params, function(Race, z_reset){
data_list <- load_race_data(Race)
data_list$z_reset0 <- z_reset
main_CV("full_race_1driver_and_fuel_base_t.stan", data_list, racename = Race)
})
?pmap_dfr
race_params <- tibble(
Race = c("Chinese Grand Prix", "Japanese Grand Prix", "Bahrain Grand Prix"),
z_reset = c(96.0, 92.0, 96.5)
)
all_results <- pmap(list(race_params$Race,race_params$z_reset), function(Race, z_reset){
data_list <- load_race_data(Race)
data_list$z_reset0 <- z_reset
main_CV("full_race_1driver_and_fuel_base_t.stan", data_list, racename = Race)
})
race_params <- tibble(
Race = c("Chinese Grand Prix", "Japanese Grand Prix", "Bahrain Grand Prix"),
z_reset = c(96.0, 92.0, 96.5)
)
results_list <- list()
for (j in seq_len(nrow(race_params))) {
Race    <- race_params$Race[j]
z_reset <- race_params$z_reset[j]
data_list <- load_race_data(Race)
data_list$z_reset0 <- z_reset
results_list[[j]] <- main_CV(
"full_race_1driver_and_fuel_base_t.stan",
data_list,
racename = Race
)
}
all_results <- pmap_dfr(race_params, function(Race, z_reset){
data_list <- load_race_data(Race)
data_list$z_reset0 <- z_reset
main_CV("full_race_1driver_and_fuel_base_t.stan", data_list, racename = Race)
})
source("CV_Functions.R")
all_results <- pmap_dfr(race_params, function(Race, z_reset){
data_list <- load_race_data(Race)
data_list$z_reset0 <- z_reset
main_CV("full_race_1driver_and_fuel_base_t.stan", data_list, racename = Race)
})
all_results <- pmap_dfr(race_params, function(Race, z_reset){
data_list <- load_race_data(Race)
data_list$z_reset0 <- z_reset
main_CV("full_race_1driver_and_fuel_base_t.stan", data_list, racename = Race)
})
# Setup
library(tidyverse)
library(Matrix)
library(rstan)
library(sgt)
library(scoringRules)
library(scoringutils)
source("CV_Functions.R")
options(mc.cores = parallel::detectCores())
allLaps <- read_csv("Hamilton_2025_All_Races.csv")
allLaps <- allLaps %>%
mutate(Stint = as.factor(Stint),
Compound = as.factor(Compound),
LapTime = LapTimeSeconds) %>%
filter(!Race %in% c("Australian Grand Prix",
"British Grand Prix",
"Miami Grand Prix")) %>%
filter(!str_detect(TrackStatus, "4|5|6|7")) # Drop Laps with safety car, virtual safety car, red flag, or safety car ending
race_params <- tibble(
Race = c("Chinese Grand Prix", "Japanese Grand Prix", "Bahrain Grand Prix"),
z_reset = c(96.0, 92.0, 96.5)
)
all_results <- pmap_dfr(race_params, function(Race, z_reset){
data_list <- load_race_data(Race)
data_list$z_reset0 <- z_reset
main_CV("full_race_1driver_and_fuel_base_t.stan", data_list, racename = Race)
})
# Setup
library(tidyverse)
library(Matrix)
library(rstan)
library(sgt)
library(scoringRules)
library(scoringutils)
source("CV_Functions.R")
options(mc.cores = parallel::detectCores())
allLaps <- read_csv("Hamilton_2025_All_Races.csv")
allLaps <- allLaps %>%
mutate(Stint = as.factor(Stint),
Compound = as.factor(Compound),
LapTime = LapTimeSeconds) %>%
filter(!Race %in% c("Australian Grand Prix",
"British Grand Prix",
"Miami Grand Prix",
"Dutch Grand Prix")) %>%
filter(!str_detect(TrackStatus, "4|5|6|7")) # Drop Laps with safety car, virtual safety car, red flag, or safety car ending
filter(allLaps, is.na(PitOutTime) & is.na(PitInTime), Race == "SpanishGrand Prix") %>%
ggplot(mapping = aes(x = LapNumber, y = LapTime, colour = Compound)) +
geom_point() +
labs(title = "Tire Degration -- Lewis Hamilton (Ferrari)",
x = "Lap Number",
y = "Lap Time (Seconds)")
filter(allLaps, is.na(PitOutTime) & is.na(PitInTime), Race == "Spanish Grand Prix") %>%
ggplot(mapping = aes(x = LapNumber, y = LapTime, colour = Compound)) +
geom_point() +
labs(title = "Tire Degration -- Lewis Hamilton (Ferrari)",
x = "Lap Number",
y = "Lap Time (Seconds)")
race_params <- tibble(
Race = c("Spanish Grand Prix","Canadian Grand Prix",
"Austrian Grand Prix","Belgian Grand Prix", "Hungarian Grand Prix"),
z_reset = c(79, 75.5, 69, 100, 80.5)
)
all_results1 <- pmap_dfr(race_params, function(Race, z_reset){
data_list <- load_race_data(Race)
data_list$z_reset0 <- z_reset
main_CV("full_race_1driver_and_fuel_base_t.stan", data_list, racename = Race)
})
# Setup
library(tidyverse)
library(Matrix)
library(rstan)
library(sgt)
library(scoringRules)
library(scoringutils)
source("CV_Functions.R")
options(mc.cores = parallel::detectCores())
allLaps <- read_csv("Hamilton_2025_All_Races.csv")
allLaps <- allLaps %>%
mutate(Stint = as.factor(Stint),
Compound = as.factor(Compound),
LapTime = LapTimeSeconds) %>%
filter(!Race %in% c("Australian Grand Prix",
"British Grand Prix",
"Miami Grand Prix",
"Dutch Grand Prix")) %>%
filter(!str_detect(TrackStatus, "4|5|6|7")) # Drop Laps with safety car, virtual safety car, red flag, or safety car ending
race_params <- tibble(
Race = c("Belgian Grand Prix", "Hungarian Grand Prix"),
z_reset = c(100, 80.5)
)
all_results1 <- pmap_dfr(race_params, function(Race, z_reset){
data_list <- load_race_data(Race)
data_list$z_reset0 <- z_reset
main_CV("full_race_1driver_and_fuel_base_t.stan", data_list, racename = Race)
})
race_params <- tibble(
Race = c("Hungarian Grand Prix"),
z_reset = c(80.5)
)
all_results1 <- pmap_dfr(race_params, function(Race, z_reset){
data_list <- load_race_data(Race)
data_list$z_reset0 <- z_reset
main_CV("full_race_1driver_and_fuel_base_t.stan", data_list, racename = Race)
})
setwd("~/Code/F1_Paper_Repo/Cross_Validation_Scripts_and_Stan_Code")
# Setup
library(tidyverse)
library(Matrix)
library(rstan)
library(sgt)
library(scoringRules)
library(scoringutils)
source("CV_Functions.R")
options(mc.cores = parallel::detectCores())
allLaps <- read_csv("Hamilton_2025_All_Races.csv")
allLaps <- allLaps %>%
mutate(Stint = as.factor(Stint),
Compound = as.factor(Compound),
LapTime = LapTimeSeconds) %>%
filter(!Race %in% c("Australian Grand Prix",
"British Grand Prix",
"Miami Grand Prix",
"Dutch Grand Prix",
"Belgian Grand Prix"),
!(LapNumber > 58 & Race == "Singapore Grand Prix")) %>%
filter(!str_detect(TrackStatus, "4|5|6|7")) # Drop Laps with safety car, virtual safety car, red flag, or safety car ending
race_params <- tibble(
Race = c("Chinese Grand Prix"#, "Japanese Grand Prix","Bahrain Grand Prix","Saudi Arabian Grand Prix","Emilia Romagna Grand Prix","Monaco Grand Prix", "Spanish Grand Prix","Canadian Grand Prix","Austrian Grand Prix", "Hungarian Grand Prix", "Italian Grand Prix", "Azerbaijan Grand Prix", "Singapore Grand Prix", "United States Grand Prix", "Mexico City Grand Prix", "São Paulo Grand Prix", "Las Vegas Grand Prix", "Qatar Grand Prix", "Abu Dhabi Grand Prix"
),
z_reset = c(96.0#, 92.0,96.5,93.5,79.0,75.0, 79.0, 75.5, 69, 80.5, 82.0, 104,94, 98.5, 81, 74.5, 95.5, 85.5, 88.5
)
)
for(i in 1:nrow(race_params)){
race <- race_params[i,1]
z_reset <- race_params[i,2]
data_list <- load_race_data(race)
data_list$z_reset0 <- z_reset
main_CV("full_race_1driver_and_fuel_base_t.stan", data_list, racename = race)
}
1:1
race_params <- tibble(
Race = c("Chinese Grand Prix"#, "Japanese Grand Prix","Bahrain Grand Prix","Saudi Arabian Grand Prix","Emilia Romagna Grand Prix","Monaco Grand Prix", "Spanish Grand Prix","Canadian Grand Prix","Austrian Grand Prix", "Hungarian Grand Prix", "Italian Grand Prix", "Azerbaijan Grand Prix", "Singapore Grand Prix", "United States Grand Prix", "Mexico City Grand Prix", "São Paulo Grand Prix", "Las Vegas Grand Prix", "Qatar Grand Prix", "Abu Dhabi Grand Prix"
),
z_reset = c(96.0#, 92.0,96.5,93.5,79.0,75.0, 79.0, 75.5, 69, 80.5, 82.0, 104,94, 98.5, 81, 74.5, 95.5, 85.5, 88.5
)
)
for(i in 1:nrow(race_params)){
race <- race_params$Race[i]
z_reset <- race_params$z_reset[i]
data_list <- load_race_data(race)
data_list$z_reset0 <- z_reset
main_CV("full_race_1driver_and_fuel_base_t.stan", data_list, racename = race)
}
